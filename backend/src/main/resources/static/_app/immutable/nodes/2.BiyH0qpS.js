import{c as Ua,l as Ga,a as p,b as r,f as u,d as S,t as j,g as h}from"../chunks/P4ebssvT.js";import{p as Ha,t as va,e as Ja,f as s,d as Oa,s as i,F as c,h as ca,i as U,j as B,b as t,r as e,k as g,n as G,l as da,u as Qa,m as o,q as ba}from"../chunks/B96m4iMf.js";import{i as m,w as E}from"../chunks/zfKQsIjr.js";import{d as n,c as Wa,l as Xa,L as ka,I as pa,B as H,e as Ya,i as Za,C as ae,A as ee}from"../chunks/C3EW5A4L.js";import"../chunks/BviUTUxV.js";import{T as wa}from"../chunks/BK669WQ-.js";a[c]="src/routes/+page.svelte";var te=p(u('<div class="loading-container svelte-1uha8ag"><!></div>'),a[c],[[51,2]]),se=p(u("<!> <!>",1),a[c],[]),ie=p(u("<!> <!>",1),a[c],[]),re=p(u('<div class="selected-indicator svelte-1uha8ag"><!></div>'),a[c],[[88,6]]),oe=p(u('<div class="device-info svelte-1uha8ag"><div class="device-icon svelte-1uha8ag"><!></div> <div class="device-details svelte-1uha8ag"><h3 class="svelte-1uha8ag"> </h3> <p class="device-path svelte-1uha8ag"> </p></div></div> <!>',1),a[c],[[78,5,[[79,6],[82,6,[[83,7],[84,7]]]]]]),ne=p(u('<div class="chip-info-grid svelte-1uha8ag"><div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">EID:</span> <span class="value svelte-1uha8ag"> </span></div> <div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">配置文件版本:</span> <span class="value svelte-1uha8ag"> </span></div> <div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">固件版本:</span> <span class="value svelte-1uha8ag"> </span></div> <div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">已安装应用:</span> <span class="value svelte-1uha8ag"> </span></div> <div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">可用内存 (非易失):</span> <span class="value svelte-1uha8ag"> </span></div> <div class="info-item svelte-1uha8ag"><span class="label svelte-1uha8ag">可用内存 (易失):</span> <span class="value svelte-1uha8ag"> </span></div></div>'),a[c],[[110,6,[[111,7,[[112,8],[113,8]]],[115,7,[[116,8],[117,8]]],[119,7,[[120,8],[121,8]]],[123,7,[[124,8],[125,8]]],[127,7,[[128,8],[129,8]]],[135,7,[[136,8],[137,8]]]]]]),le=p(u('<!> <div class="action-buttons svelte-1uha8ag"><!> <!></div>',1),a[c],[[144,5]]),ve=p(u('<div class="chip-info-section svelte-1uha8ag"><h2 class="svelte-1uha8ag">芯片信息</h2> <!></div>'),a[c],[[97,3,[[98,4]]]]),ce=p(u('<div class="devices-grid svelte-1uha8ag"></div> <!>',1),a[c],[[70,2]]),de=p(u('<div class="device-page svelte-1uha8ag"><div class="header svelte-1uha8ag"><h1 class="svelte-1uha8ag">设备选择</h1> <p class="svelte-1uha8ag">请选择一个 eUICC 读卡器设备以继续</p></div> <!></div>'),a[c],[[44,0,[[45,1,[[46,2],[47,2]]]]]]);function a(Ca,ya){Ua(new.target),Ha(ya,!0,a);let _=va(ca(null),"chipInfo"),J=va(ca(!1),"loadingChipInfo"),A=va(ca(null),"chipError");Ja(async()=>{(await U(n.loadDevices()))(),n.selectedDevice&&(await U(ua()))()});async function ua(){B(J,!0),B(A,null);try{B(_,(await U(Wa.getInfo()))(),!0)}catch(l){B(A,l instanceof Error?l.message:"获取芯片信息失败",!0),console.error(...Xa("error","Failed to load chip info:",l))}finally{B(J,!1)}}async function Da(l){n.selectDevice(l),(await U(ua()))()}var Ba={...Ga()},O=de(),Ea=i(t(O),2);{var Aa=l=>{var T=te(),Q=t(T);s(()=>ka(Q,{description:"正在加载设备列表..."}),"component",a,52,3,{componentTag:"Loading"}),e(T),r(l,T)},Fa=l=>{var T=S(),Q=g(T);{var Na=b=>{var F=se(),R=g(F);s(()=>pa(R,{kind:"error",title:"加载失败",get subtitle(){return n.error},$$events:{close:()=>n.clearError()}}),"component",a,55,2,{componentTag:"InlineNotification"});var W=i(R,2);s(()=>H(W,{$$events:{click:()=>n.loadDevices()},children:E(a,(X,$)=>{G();var x=j("重试");r(X,x)}),$$slots:{default:!0}}),"component",a,61,2,{componentTag:"Button"}),r(b,F)},Pa=b=>{var F=S(),R=g(F);{var W=$=>{var x=ie(),k=g(x);s(()=>pa(k,{kind:"warning",title:"未检测到设备",subtitle:"请确保读卡器已连接并且驱动程序已正确安装"}),"component",a,63,2,{componentTag:"InlineNotification"});var Y=i(k,2);s(()=>H(Y,{$$events:{click:()=>n.loadDevices()},children:E(a,(Z,w)=>{G();var v=j("刷新");r(Z,v)}),$$slots:{default:!0}}),"component",a,68,2,{componentTag:"Button"}),r($,x)},X=$=>{var x=ce(),k=g(x);s(()=>Ya(k,21,()=>n.devices,Za,(w,v)=>{{let aa=Qa(()=>da(n.selectedDevice?.path,o(v).path)?"selected":"");s(()=>wa(w,{get class(){return`device-tile ${o(aa)??""}`},$$events:{click:()=>Da(o(v))},children:E(a,(ea,fa)=>{var f=oe(),C=g(f),N=t(C),ta=t(N);s(()=>ae(ta,{size:32}),"component",a,80,7,{componentTag:"Chip"}),e(N);var M=i(N,2),d=t(M),V=t(d,!0);e(d);var q=i(d,2),sa=t(q,!0);e(q),e(M),e(C);var P=i(C,2);{var z=y=>{var D=re(),K=t(D);s(()=>ee(K,{size:24}),"component",a,89,7,{componentTag:"ArrowRight"}),e(D),r(y,D)};s(()=>m(P,y=>{da(n.selectedDevice?.path,o(v).path)&&y(z)}),"if",a,87,5)}ba(()=>{h(V,o(v).name),h(sa,o(v).path)}),r(ea,f)}),$$slots:{default:!0}}),"component",a,72,4,{componentTag:"Tile"})}}),"each",a,71,3),e(k);var Y=i(k,2);{var Z=w=>{var v=ve(),aa=i(t(v),2);{var ea=f=>{s(()=>ka(f,{description:"正在加载芯片信息..."}),"component",a,100,5,{componentTag:"Loading"})},fa=f=>{var C=S(),N=g(C);{var ta=d=>{s(()=>pa(d,{kind:"error",title:"加载失败",get subtitle(){return o(A)},$$events:{close:()=>B(A,null)}}),"component",a,102,5,{componentTag:"InlineNotification"})},M=d=>{var V=S(),q=g(V);{var sa=P=>{var z=le(),y=g(z);s(()=>wa(y,{children:E(a,(L,ga)=>{var I=ne(),ia=t(I),_a=i(t(ia),2),Ra=t(_a,!0);e(_a),e(ia);var ra=i(ia,2),ha=i(t(ra),2),Ma=t(ha,!0);e(ha),e(ra);var oa=i(ra,2),ma=i(t(oa),2),Va=t(ma,!0);e(ma),e(oa);var na=i(oa,2),$a=i(t(na),2),qa=t($a,!0);e($a),e(na);var la=i(na,2),xa=i(t(la),2),za=t(xa);e(xa),e(la);var Ia=i(la,2),Ta=i(t(Ia),2),Ka=t(Ta);e(Ta),e(Ia),e(I),ba((Sa,ja)=>{h(Ra,o(_).eid),h(Ma,o(_).euiccInfo2.profileVersion),h(Va,o(_).euiccInfo2.euiccFirmwareVer),h(qa,o(_).euiccInfo2.extCardResource.installedApp),h(za,`${Sa??""} KB`),h(Ka,`${ja??""} KB`)},[()=>(o(_).euiccInfo2.extCardResource.freeNonVolatileMemory/1024).toFixed(2),()=>(o(_).euiccInfo2.extCardResource.freeVolatileMemory/1024).toFixed(2)]),r(L,I)}),$$slots:{default:!0}}),"component",a,109,5,{componentTag:"Tile"});var D=i(y,2),K=t(D);s(()=>H(K,{href:"/profiles",children:E(a,(L,ga)=>{G();var I=j("管理配置文件");r(L,I)}),$$slots:{default:!0}}),"component",a,145,6,{componentTag:"Button"});var La=i(K,2);s(()=>H(La,{kind:"secondary",href:"/notifications",children:E(a,(L,ga)=>{G();var I=j("查看通知");r(L,I)}),$$slots:{default:!0}}),"component",a,146,6,{componentTag:"Button"}),e(D),r(P,z)};s(()=>m(q,P=>{o(_)&&P(sa)},!0),"if",a,108,4)}r(d,V)};s(()=>m(N,d=>{o(A)?d(ta):d(M,!1)},!0),"if",a,101,4)}r(f,C)};s(()=>m(aa,f=>{o(J)?f(ea):f(fa,!1)}),"if",a,99,4)}e(v),r(w,v)};s(()=>m(Y,w=>{n.selectedDevice&&w(Z)}),"if",a,96,2)}r($,x)};s(()=>m(R,$=>{da(n.devices.length,0)?$(W):$(X,!1)},!0),"if",a,62,1)}r(b,F)};s(()=>m(Q,b=>{n.error?b(Na):b(Pa,!1)},!0),"if",a,54,1)}r(l,T)};s(()=>m(Ea,l=>{n.loading?l(Aa):l(Fa,!1)}),"if",a,50,1)}return e(O),r(Ca,O),Oa(Ba)}export{a as component};
